<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert 'gscramble' output to newhybrids format — gscramble2newhybrids • gscramble</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convert 'gscramble' output to newhybrids format — gscramble2newhybrids"><meta property="og:description" content='This function turns character-based alleles into integers
and writes the necessary headers, etc.  It preferentially uses
the "id" column if it exists in M$ret_ids. Otherwise it uses
the indiv column for the sample names.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gscramble</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/gscramble-tutorial.html">A first tutorial for 'gscramble'</a>
    </li>
    <li>
      <a href="../articles/about-createGSP.html">Pedigrees Available from create_GSP()</a>
    </li>
    <li>
      <a href="../articles/permutation-options.html">Permutation Options in 'gscramble'</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/eriqande/gscramble/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert 'gscramble' output to newhybrids format</h1>
    <small class="dont-index">Source: <a href="https://github.com/eriqande/gscramble/blob/HEAD/R/gscramble2newhybrids.R" class="external-link"><code>R/gscramble2newhybrids.R</code></a></small>
    <div class="hidden name"><code>gscramble2newhybrids.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function turns character-based alleles into integers
and writes the necessary headers, etc.  It preferentially uses
the "id" column if it exists in <code>M$ret_ids</code>. Otherwise it uses
the <code>indiv</code> column for the sample names.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gscramble2newhybrids</span><span class="op">(</span></span>
<span>  <span class="va">M</span>,</span>
<span>  <span class="va">M_meta</span>,</span>
<span>  z <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  s <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  retain <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outfile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>M</dt>
<dd><p>the output from <code><a href="segments2markers.html">segments2markers()</a></code> from 'gscramble'. This could
have an added <code>id</code> column on it, which will then be used for the
sample names.</p></dd>


<dt>M_meta</dt>
<dd><p>the Marker meta data file.</p></dd>


<dt>z</dt>
<dd><p>A vector of length two. The values
are regular expressions that the sample names that you want to have
-z 0 or -z 1 should match.  For example <code>c("SH", "CCT")</code> means any
sample matching "SH" would get z0 and any sample matchine "CCT" would
get z1.</p></dd>


<dt>s</dt>
<dd><p>a single regular expressions that matches individuals that
should be given the -s option. For example "SH|CCT"</p></dd>


<dt>retain</dt>
<dd><p>a vector of loci to retain.</p></dd>


<dt>outfile</dt>
<dd><p>path to the file to write the newhybrids data set to. For CRAN
compliance, this is, by default, a temp file. But you can change it to be
anything valid.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with three components:</p><ul><li><p><code>outfile</code>: outfile name of saved data.</p></li>
<li><p><code>genos</code>: Genotypes</p></li>
<li><p><code>allele_names</code>: Allele names.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>It allows you to set the -s and -z through some regular expression mapping.</p>
<p>This function relies a lot on some tidyverse functions
for pivoting, etc.  As such, it is not intended for data sets with
tens of thousands of markers.  You oughtn't be using NewHybrids with
so many markers, anyway!</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># get output from segments2markers():</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/example.html" class="external-link">example</a></span><span class="op">(</span><span class="st">"segments2markers"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; #### First, get input segments for the function ####</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # We construct an example here where we will request segregation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # down a GSP with two F1s and F1B backcrosses between two hypothetical</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # populations, A and B.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; set.seed(5)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; gsp_f1f1b &lt;- create_GSP("A", "B", F1 = TRUE, F1B = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # We will imagine that in our marker data there are three groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # labelled "Pop1", "Pop2", and "Pop3", and we want to create the F1Bs with backcrossing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # only to Pop3.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; reppop &lt;- tibble::tibble(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+     index = as.integer(c(1, 1, 2, 2)),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+     pop = c("A", "B", "A", "B"),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+     group = c("Pop3", "Pop1", "Pop3", "Pop2")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+ )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # combine those into a request</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; request &lt;- tibble::tibble(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+    gpp = list(gsp_f1f1b),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+    reppop = list(reppop)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2+ )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # now segegate segments.  Explicitly pass the markers</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # in M_meta so that the order of the markers is set efficiently.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; segs &lt;- segregate(request, RecRates, M_meta)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; #### Now, use segs in an example with segments2markers() ####</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # this uses several package data objects that are there for examples</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; # and illustration.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sgmnt2&gt; s2m_result &lt;- segments2markers(segs, I_meta, M_meta, Geno)</span>
<span class="r-in"><span><span class="co"># copy that result to a new variable</span></span></span>
<span class="r-in"><span><span class="va">M</span> <span class="op">&lt;-</span> <span class="va">s2m_result</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># then run it</span></span></span>
<span class="r-in"><span><span class="fu">gscramble2newhybrids</span><span class="op">(</span><span class="va">M</span>, <span class="va">M_meta</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $outfile</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpEc82Tr/file17c7583e4911"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $genos</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 78 × 102</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    useit opt_col   WU_10.2_12_4469057 ALGA0064411 WU_10.2_12_7394362 ASGA0090707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>     1 n h-1-1-… 0202               0000        0101               0201       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>     2 n h-1-1-… 0102               0101        0101               0202       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>     3 n h-1-1-… 0102               0000        0102               0201       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>     4 n h-1-2-… 0102               0201        0102               0202       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>     5 n h-1-2-… 0102               0201        0102               0202       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>     6 n h-1-2-… 0202               0201        0101               0201       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>     7 n permed… 0202               0101        0102               0101       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>     8 n permed… 0202               0101        0202               0101       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>     9 n permed… 0202               0101        0202               0000       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>    10 n permed… 0202               0101        0202               0101       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 68 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 96 more variables: WU_10.2_12_8971475 &lt;chr&gt;, WU_10.2_12_11034660 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   WU_10.2_12_11146365 &lt;chr&gt;, ASGA0053210 &lt;chr&gt;, ALGA0114537 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   WU_10.2_12_15628863 &lt;chr&gt;, ALGA0108041 &lt;chr&gt;, ALGA0065869 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   WU_10.2_12_31279548 &lt;chr&gt;, DRGA0011741 &lt;chr&gt;, WU_10.2_12_42676693 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   M1GA0016777 &lt;chr&gt;, WU_10.2_12_46448883 &lt;chr&gt;, ALGA0066740 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   MARC0036299 &lt;chr&gt;, ALGA0118253 &lt;chr&gt;, WU_10.2_12_57360470 &lt;chr&gt;, …</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $allele_names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 298 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    locus       allele alle_int     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 17_13447160 A      01          42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 17_13447160 G      02         108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 17_13447160 <span style="color: #BB0000;">NA</span>     00           6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 17_17657093 C      01         102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 17_17657093 T      02          38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 17_17657093 <span style="color: #BB0000;">NA</span>     00          16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ALGA0049523 A      01          86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ALGA0049523 G      02          64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ALGA0049523 <span style="color: #BB0000;">NA</span>     00           6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ALGA0064411 C      01         136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 288 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eric C. Anderson, Rachael M. Giglio, Matt G. DeSaix, Timothy J. Smyser.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

